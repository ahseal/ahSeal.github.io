<!doctype html><html lang=zh><head><meta charset=UTF-8><meta content="width=device-width,initial-scale=1.0" name=viewport><meta content="light dark" name=color-scheme><title>在国内优雅地使用scoop</title><meta content="<p>Windows平台下最好用的包管理工具。</p>
" name=description><link href=/img/favicon-32x32.png rel=icon sizes=32x32 type=image/png><link href=/img/favicon-16x16.png rel=icon sizes=16x16 type=image/png><link href=/img/apple-touch-icon.png rel=apple-touch-icon sizes=180x180><link href=https://fonts.googleapis.com rel=preconnect><link crossorigin href=https://fonts.gstatic.com rel=preconnect><link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono&family=Jost&display=swap" rel=stylesheet><link href=https://cdn.jsdelivr.net/npm/remixicon@2.5.0/fonts/remixicon.css rel=stylesheet><link href=/css/var.css rel=stylesheet><link href=/css/base.css rel=stylesheet><link href=/css/header.css rel=stylesheet><link href=/css/footer.css rel=stylesheet><link href=/css/post.css rel=stylesheet><body><script>if(localStorage.getItem('theme')=='dark'){document.body.classList.add('dark-mode')}</script><header class=blur><div class=top><a class="header blog" href=/blog><i class="ri-quill-pen-line ri-2x"></i><span>Blog</span></a><a class=back href=/><i class="ri-arrow-left-s-line ri-1x"></i><span>Home</span></a><div class=icon><a aria-label=home href=/ id=go-home><i class="ri-user-6-line ri-xl"></i></a><a aria-label="rss feed" href=/blog/feed.xml><i class="ri-rss-line ri-xl"></i></a><button aria-label="dark light mode switch" id=color-toggle><i class="ri-moon-line ri-xl"></i></button><button aria-label="table of content" id=toc-toggle><i class="ri-menu-2-line ri-xl"></i></button></div></div><div id=progress-bar></div></header><div class=wrap><div class=blank></div><main><div id=top></div><article><h1>在国内优雅地使用scoop</h1><div id=post-info><div class=date><span id=publish>2023-05-11</span></div><div class=tags><a class=tag href=https://ahSeal.github.io/tags/windows><i class="ri-hashtag ri-sm"></i><span>windows</span></a><a class=tag href=https://ahSeal.github.io/tags/scoop><i class="ri-hashtag ri-sm"></i><span>scoop</span></a></div></div><p>Windows平台下最好用的包管理工具。</p><span id=continue-reading></span><blockquote><p>安装前提：<ul><li>PowerShell version 5.1 or later<li>允许本地运行PowerShell脚本</ul><pre class=language-powershell data-lang=powershell style=background:#2e3440;color:#d8dee9><code class=language-powershell data-lang=powershell><span style=color:#88c0d0>Set-ExecutionPolicy</span><span> RemoteSigned </span><span style=color:#81a1c1>-</span><span>Scope CurrentUser</span><span style=color:#81a1c1>`
</span></code></pre></blockquote><hr><h1 id=an-zhuang>安装</h1><p>默认安装位置为 <code>C:\Users\xxx\.scoop</code>，如果需要更改安装位置（后续所有软件也会安装在该目录下），可以添加环境变量<code>SCOOP = &LTtarget_path></code><pre class=language-powershell data-lang=powershell style=background:#2e3440;color:#d8dee9><code class=language-powershell data-lang=powershell><span style=color:#616e88># 官方安装
</span><span style=color:#616e88># irm get.scoop.sh | iex
</span><span>
</span><span style=color:#616e88># 代理安装
</span><span>irm https:</span><span style=color:#81a1c1>//</span><span style=color:#88c0d0>ghproxy.com</span><span style=color:#81a1c1>/</span><span style=color:#88c0d0>raw.githubusercontent.com</span><span style=color:#81a1c1>/</span><span>duzyn</span><span style=color:#81a1c1>/</span><span>scoop</span><span style=color:#81a1c1>-</span><span>cn</span><span style=color:#81a1c1>/</span><span>master</span><span style=color:#81a1c1>/</span><span>install.ps1 </span><span style=color:#81a1c1>|</span><span> iex
</span></code></pre><h2 id=bi-yao-an-zhuang-ruan-jian>必要安装软件</h2><pre class=language-sh data-lang=sh style=background:#2e3440;color:#d8dee9><code class=language-sh data-lang=sh><span style=color:#88c0d0>scoop</span><span> install https://ghproxy.com/raw.githubusercontent.com/duzyn/scoop-cn/master/bucket/7zip.json
</span><span style=color:#88c0d0>scoop</span><span> install https://ghproxy.com/raw.githubusercontent.com/duzyn/scoop-cn/master/bucket/git.json
</span><span style=color:#88c0d0>scoop</span><span> install https://ghproxy.com/raw.githubusercontent.com/duzyn/scoop-cn/master/bucket/aria2.json
</span></code></pre><blockquote><p>由于此时我们还没有添加scoop-cn的应用仓库，而添加应用仓库的前提是本机拥有git，所以我们在此处先指定url安装以上软件</blockquote><h2 id=ying-yong-ku-geng-gai>应用库更改</h2><p>更改scoop仓库地址，加快<code>scoop update</code>的速度<pre class=language-sh data-lang=sh style=background:#2e3440;color:#d8dee9><code class=language-sh data-lang=sh><span style=color:#88c0d0>scoop</span><span> config SCOOP_REPO https://ghproxy.com/github.com/ScoopInstaller/Scoop
</span></code></pre><p>添加scoop-cn仓库<pre class=language-sh data-lang=sh style=background:#2e3440;color:#d8dee9><code class=language-sh data-lang=sh><span style=color:#88c0d0>scoop</span><span> bucket add scoop-cn https://ghproxy.com/github.com/duzyn/scoop-cn
</span></code></pre><p>替换main仓库<pre class=language-sh data-lang=sh style=background:#2e3440;color:#d8dee9><code class=language-sh data-lang=sh><span style=color:#88c0d0>scoop</span><span> bucket rm main
</span><span style=color:#616e88># scoop bucket add main https://ghproxy.com/github.com/ScoopInstaller/Main
</span></code></pre><blockquote><p>由于scoop-cn仓库包含了scoop的主要十个应用库(<code>scoop buctet known</code>查看)，其中就包含了main仓库，所以再单独添加main可能显得多余，同时移除main也并无影响</blockquote><h1 id=an-zhuang-ying-yong>安装应用</h1><p>卸载刚刚安装的7zip，git，aria2，然后从scoop-cn仓库再重新下载，以便后续可以收到更新<pre class=language-sh data-lang=sh style=background:#2e3440;color:#d8dee9><code class=language-sh data-lang=sh><span style=color:#88c0d0>scoop</span><span> uninstall 7zip git aria2
</span><span style=color:#88c0d0>scoop</span><span> install scoop-cn/7zip
</span><span style=color:#88c0d0>scoop</span><span> install scoop-cn/git
</span><span style=color:#88c0d0>scoop</span><span> install scoop-cn/aria2
</span><span style=color:#616e88># 如果移除main仓库后单独留scoop-cn仓库
</span><span style=color:#616e88># scoop install 7zip git aria2
</span></code></pre><h1 id=sou-suo-ruan-jian>搜索软件</h1><p>官方给出的搜索命令是<pre class=language-sh data-lang=sh style=background:#2e3440;color:#d8dee9><code class=language-sh data-lang=sh><span style=color:#88c0d0>scoop</span><span> search </span><span style=color:#81a1c1><</span><span>target_app</span><span style=color:#81a1c1>>
</span></code></pre><p>但要明确scoop本身是由PowerShell脚本所编写，性能本身就不及二进制应用。<p>当检索目标过多时(尤其针对scoop-cn这种整合仓库)，搜索时间会非常长，此时就推荐使用另一个由golang开发的scoop搜索工具：<code>scoop-search</code><pre class=language-sh data-lang=sh style=background:#2e3440;color:#d8dee9><code class=language-sh data-lang=sh><span style=color:#616e88># 安装
</span><span style=color:#88c0d0>scoop</span><span> install scoop-search
</span><span>
</span><span style=color:#616e88># 搜索目标软件
</span><span style=color:#88c0d0>scoop-search </span><span style=color:#81a1c1><</span><span>target_app</span><span style=color:#81a1c1>>
</span></code></pre><h1 id=dai-li-xiang-guan>代理相关</h1><p>由于未知因素，可能在添加scoop-cn仓库后，下载软件依旧非常慢，速度甚至比肩百度云。这个时候就需要借助代理工具，个人仅推荐v2rayN(scoop-cn中已收录)<pre class=language-sh data-lang=sh style=background:#2e3440;color:#d8dee9><code class=language-sh data-lang=sh><span style=color:#88c0d0>git</span><span> config --global http.proxy socks5://127.0.0.1:10808
</span><span style=color:#88c0d0>git</span><span> config --global https.proxy socks5://127.0.0.1:10808
</span><span style=color:#88c0d0>scoop</span><span> config proxy 127.0.0.1:10808
</span><span>
</span><span style=color:#616e88># 移除代理
</span><span style=color:#88c0d0>git</span><span> config --global --unset http.proxy
</span><span style=color:#88c0d0>git</span><span> config --global --unset https.proxy
</span><span style=color:#88c0d0>scoop</span><span> config rm proxy
</span></code></pre><blockquote class=note id=cc_license><i class="ri-creative-commons-line ri-lg"></i><div class=content><p>This work is licensed under <a rel="nofollow noreferrer" href=http://creativecommons.org/licenses/by-nc-sa/4.0/>CC BY-NC-SA 4.0</a>.</div></blockquote></article></main><aside class=blur><nav><ul><li><a class=toc-h2 href=#an-zhuang>安装</a> <ul><li><a class=toc-h3 href=#bi-yao-an-zhuang-ruan-jian>必要安装软件</a><li><a class=toc-h3 href=#ying-yong-ku-geng-gai>应用库更改</a></ul><li><a class=toc-h2 href=#an-zhuang-ying-yong>安装应用</a><li><a class=toc-h2 href=#sou-suo-ruan-jian>搜索软件</a><li><a class=toc-h2 href=#dai-li-xiang-guan>代理相关</a></ul></nav><a aria-label="back to top" href=#top id=back-to-top><i class="ri-arrow-up-s-line ri-2x"></i></a></aside></div><footer><div class=copyright>Copyright © 2023 ahSeal. All rights reserved.</div><div class=credits><span>Powered by <a rel="noreferrer noopener" href=https://www.getzola.org/ target=_blank>Zola</a> and <a rel="noreferrer noopener" href=https://github.com/isunjn/serene target=_blank>Serene</a></span></div></footer><script src=/js/dark.js></script><script src=/js/toc.js></script><script src=/js/progress.js></script><script src=/js/lightense.min.js></script><script src=/js/img.js></script>