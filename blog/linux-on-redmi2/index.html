<!doctype html><html lang=zh><head><meta charset=UTF-8><meta content="width=device-width,initial-scale=1.0" name=viewport><meta content="light dark" name=color-scheme><title>在Redmi2上安装Linux</title><meta name=description><link href=/img/favicon-32x32.png rel=icon sizes=32x32 type=image/png><link href=/img/favicon-16x16.png rel=icon sizes=16x16 type=image/png><link href=/img/apple-touch-icon.png rel=apple-touch-icon sizes=180x180><link href=https://fonts.googleapis.com rel=preconnect><link crossorigin href=https://fonts.gstatic.com rel=preconnect><link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono&family=Jost&display=swap" rel=stylesheet><link href=https://cdn.jsdelivr.net/npm/remixicon@2.5.0/fonts/remixicon.css rel=stylesheet><link href=/css/var.css rel=stylesheet><link href=/css/base.css rel=stylesheet><link href=/css/header.css rel=stylesheet><link href=/css/footer.css rel=stylesheet><link href=/css/post.css rel=stylesheet><body><script>if(localStorage.getItem('theme')=='dark'){document.body.classList.add('dark-mode')}</script><header class=blur><div class=top><a class="header blog" href=/blog><i class="ri-quill-pen-line ri-2x"></i><span>Blog</span></a><a class=back href=/><i class="ri-arrow-left-s-line ri-1x"></i><span>Home</span></a><div class=icon><a aria-label=home href=/ id=go-home><i class="ri-user-6-line ri-xl"></i></a><a aria-label="rss feed" href=/blog/feed.xml><i class="ri-rss-line ri-xl"></i></a><button aria-label="dark light mode switch" id=color-toggle><i class="ri-moon-line ri-xl"></i></button><button aria-label="table of content" id=toc-toggle><i class="ri-menu-2-line ri-xl"></i></button></div></div><div id=progress-bar></div></header><div class=wrap><div class=blank></div><main><div id=top></div><article><h1>在Redmi2上安装Linux</h1><div id=post-info><div class=date><span id=publish>2023-03-01</span></div><div class=tags><a class=tag href=https://ahSeal.github.io/tags/linux><i class="ri-hashtag ri-sm"></i><span>linux</span></a><a class=tag href=https://ahSeal.github.io/tags/redmi><i class="ri-hashtag ri-sm"></i><span>redmi</span></a></div></div><blockquote class="note hidden" data-text1="Note: This article was last updated " data-text2=" days ago and may be out of date." data-days=365 id=outdate_warn><i class="ri-alarm-warning-line ri-lg"></i><span></span></blockquote><p>感谢老妈提供的Redmi2😙，感谢postmarketOS项目的所有开发者们！<p>wiki地址<a rel="nofollow noreferrer" href=https://wiki.postmarketos.org/wiki/Xiaomi_Redmi_2_(xiaomi-wt88047)>Xiaomi Redmi 2 (xiaomi-wt88047)</a><blockquote><p>postmarketOS系统基于Alpine，请勿使用主力机进行刷机操作，刷机有风险，后果无人负责！！</blockquote><ul><li><a rel="nofollow noreferrer" href=https://images.postmarketos.org/bpo/v22.12/xiaomi-wt88047/>postmarketOS镜像</a><li><a rel="nofollow noreferrer" href=https://github.com/msm8916-mainline/lk2nd>lk2nd-msm8916</a></ul><p>个人选择为phosh版本，基于GNOME(GTK3)<h1 id=shua-ru-jing-xiang>刷入镜像</h1><p>以fastboot模式先刷入lk2nd<pre class=language-sh data-lang=sh style=background:#2e3440;color:#d8dee9><code class=language-sh data-lang=sh><span style=color:#88c0d0>fastboot</span><span> flash boot lk2nd-msm8916.img
</span><span style=color:#88c0d0>fastboot</span><span> reboot
</span></code></pre><p>重启后会进入lk2nd的主页面，在此状态下刷入postmarketOS系统镜像<pre class=language-sh data-lang=sh style=background:#2e3440;color:#d8dee9><code class=language-sh data-lang=sh><span style=color:#88c0d0>fastboot</span><span> erase userdate </span><span style=color:#616e88># 格式化用户分区数据
</span><span style=color:#88c0d0>fastboot</span><span> flash userdate postmarketOS-v22.06-phosh-18-xiaomi-wt88047.img
</span><span style=color:#88c0d0>fastboot</span><span> erase system
</span><span style=color:#88c0d0>fastboot</span><span> reboot
</span></code></pre><blockquote><p>不知道为啥我的手机在lk2nd模式下fastboot无法识别😭，不过好处就是在手机在fastboot模式中就可以直接刷入系统镜像</blockquote><h1 id=jin-ru-xi-tong>进入系统</h1><p>postmarketOS提供默认用户名为<code>user</code>，密码及PIN为<code>147147</code>。进入系统后推荐使用ssh进行操作：<pre class=language-sh data-lang=sh style=background:#2e3440;color:#d8dee9><code class=language-sh data-lang=sh><span style=color:#88c0d0>sudo</span><span> service sshd start </span><span style=color:#616e88># 开启ssh服务
</span><span style=color:#88c0d0>sudo</span><span> rc-update add sshd </span><span style=color:#616e88># 将ssh添加如开机启动
</span></code></pre><p>同一局域网下知道IP地址，PC即可访问手机<pre class=language-sh data-lang=sh style=background:#2e3440;color:#d8dee9><code class=language-sh data-lang=sh><span style=color:#88c0d0>ssh</span><span> user@IP地址   </span><span style=color:#616e88># password = 147147
</span></code></pre><h2 id=bao-guan-li>包管理</h2><p>和Alpine一样，使用apk作为包管理器。<p>编辑配置文件<pre class=language-sh data-lang=sh style=background:#2e3440;color:#d8dee9><code class=language-sh data-lang=sh><span style=color:#88c0d0>sudo</span><span> vi /etc/apk/repositories
</span></code></pre><p>查看 apk 版本<pre class=language-bash data-lang=bash style=background:#2e3440;color:#d8dee9><code class=language-bash data-lang=bash><span style=color:#88c0d0>cat</span><span> /etc/alpine-release
</span><span style=color:#616e88># 3.17.2
</span></code></pre><p>添加阿里云镜像<pre style=background:#2e3440;color:#d8dee9><code><span>http://mirrors.aliyun.com/alpine/v3.17/main
</span><span>http://mirrors.aliyun.com/alpine/v3.17/community
</span></code></pre><p>更新仓库及软件包<pre class=language-sh data-lang=sh style=background:#2e3440;color:#d8dee9><code class=language-sh data-lang=sh><span style=color:#88c0d0>sudo</span><span> apk update
</span><span style=color:#616e88># sudo apk upgrade -a   # 软件包更新有概率会导致机子重启后停在tty1中，
</span><span>                        </span><span style=color:#616e88># 苦逼的我没带键盘，wifi连不上导致用不了ssh，
</span><span>                        </span><span style=color:#616e88># 刷了3次才发现这个Bug。。。
</span></code></pre><h2 id=an-zhuang-zhong-duan>安装终端</h2><p>postmarketOS默认使用终端为ash<pre class=language-sh data-lang=sh style=background:#2e3440;color:#d8dee9><code class=language-sh data-lang=sh><span style=color:#88c0d0>sudo</span><span> apk add fish
</span><span style=color:#88c0d0>cat</span><span> /etc/shells     </span><span style=color:#616e88># 当前可用shell
</span><span style=color:#88c0d0>chsh</span><span> -s /bin/fish
</span><span style=color:#88c0d0>chsh</span><span> -s /bin/zsh
</span></code></pre><h2 id=an-zhuang-docker>安装 docker</h2><pre class=language-bash data-lang=bash style=background:#2e3440;color:#d8dee9><code class=language-bash data-lang=bash><span style=color:#88c0d0>sudo</span><span> apk add docker
</span><span style=color:#88c0d0>sudo</span><span> rc-update add docker boot   </span><span style=color:#616e88># 添加至开机启动
</span><span style=color:#88c0d0>sudo</span><span> service docker start       </span><span style=color:#616e88># 启动 docker 服务
</span></code></pre><h2 id=ting-yong-gui-ke-xuan>停用GUI（可选）</h2><p>个人机子是标准版，不到1GB的内存，在开机后只剩400MB不到。<p>但关闭GNOEME的GUI后，在无大进程的情况下，仅占用100MB出头。<blockquote><p>应该没人放着Android不用，用Linux的GUI吧，不会吧，不会吧？？</blockquote><pre class=language-sh data-lang=sh style=background:#2e3440;color:#d8dee9><code class=language-sh data-lang=sh><span style=color:#88c0d0>sudo</span><span> rc-update del tinydm   </span><span style=color:#616e88># phosh默认Display manager
</span><span style=color:#616e88># sudo rc-update add tinydm default   # 恢复GUI启动
</span></code></pre><p>关闭后屏幕会停留在tty1界面中，一段时间会自动息屏<hr><blockquote><p>我为什么不用<a rel="nofollow noreferrer" href=https://github.com/Project-DragonPi/mobian-wt88047>mobain</a>?原因有俩:<ul><li>mobain 光镜像就有3.5GB，机子实在吃不消。。<li>镜像公开放在github上，走代理1个GB的流量，最后刷进去，卡在首屏没反应，你说我气不气😥（八成是机子的问题）</ul></blockquote><blockquote><p>文章参考: <a rel="nofollow noreferrer" href=https://www.bilibili.com/read/cv17390817>红米2 安装Linux: postmarketOS(基于Alpine)及后续玩法</a></blockquote><blockquote class=note id=cc_license><i class="ri-creative-commons-line ri-lg"></i><div class=content><p>This work is licensed under <a rel="nofollow noreferrer" href=http://creativecommons.org/licenses/by-nc-sa/4.0/>CC BY-NC-SA 4.0</a>.</div></blockquote></article></main><aside class=blur><nav><ul><li><a class=toc-h2 href=#shua-ru-jing-xiang>刷入镜像</a><li><a class=toc-h2 href=#jin-ru-xi-tong>进入系统</a> <ul><li><a class=toc-h3 href=#bao-guan-li>包管理</a><li><a class=toc-h3 href=#an-zhuang-zhong-duan>安装终端</a><li><a class=toc-h3 href=#an-zhuang-docker>安装 docker</a><li><a class=toc-h3 href=#ting-yong-gui-ke-xuan>停用GUI（可选）</a></ul></ul></nav><a aria-label="back to top" href=#top id=back-to-top><i class="ri-arrow-up-s-line ri-2x"></i></a></aside></div><footer><div class=copyright>Copyright © 2023 ahSeal. All rights reserved.</div><div class=credits><span>Powered by <a rel="noreferrer noopener" href=https://www.getzola.org/ target=_blank>Zola</a> and <a rel="noreferrer noopener" href=https://github.com/isunjn/serene target=_blank>Serene</a></span></div></footer><script src=/js/dark.js></script><script src=/js/outdate.js></script><script src=/js/toc.js></script><script src=/js/progress.js></script><script src=/js/lightense.min.js></script><script src=/js/img.js></script>